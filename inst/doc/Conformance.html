<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Conformance with the CF Metadata Conventions</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>







<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Conformance with the CF Metadata
Conventions</h1>



<p><code>CFtime</code> is based on version 1.12 of the CF Metadata
Conventions. The text for the <em>time coordinate</em> in the
conventions may be consulted <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.12/cf-conventions.html#time-coordinate">here</a>.</p>
<blockquote>
<p>The <em>time coordinate</em> is one of four coordinate types that
receive “special treatment” in the conventions. The other three are
longitude, latitude and the vertical. If you require
convention-compliant support for any of these three other coordinate
types, please consider using package <a href="https://cran.r-project.org/package=ncdfCF"><code>ncdfCF</code></a>
which supports all three coordinate types and links with
<code>CFtime</code> for support of the time coordinate.</p>
</blockquote>
<p>This document sets out how the <code>CFtime</code> package conforms
to the CF Metadata Conventions, by section of the conventions. This
information is mostly useful for developers and expert users.</p>
<p>If you have issues reading a netCDF file that is due to conformance
of package <code>CFtime</code> with the CF Metadata Conventions, please
<a href="https://github.com/pvanlaake/CFtime/issues">open an issue on
GitHub</a>.</p>
<p>Please note that there are many netCDF files out there that are not
claiming adherence to the CF Metadata Conventions but whose time
coordinate can still be successfully handled by <code>CFtime</code>: the
<code>netCDF</code> library itself provides the basic plumbing.</p>
<div id="time-coordinate" class="section level2">
<h2>4.4. Time Coordinate</h2>
<p>A <code>CFTime</code> object is constructed from information that is
contained in the <code>units</code> and <code>calendar</code> attributes
for a time coordinate read out of a netCDF file. The package does not
actually access the netCDF file, it only uses the information that was
read out of the file by e.g. <code>ncdfCF</code>. Consequently, the
<code>CFtime</code> package can also construct a <code>CFTime</code>
object from suitable character strings.</p>
<p>This package is agnostic to the orientation of the axes in any data
variable that references the time coordinate. Consequently, the
<code>standard_name</code> and <code>axis</code> attributes are not
considered by this package (but the <code>ncdfCF</code> package handles
both). Identification of a time coordinate is done by the
<code>units</code> attribute, alone.</p>
</div>
<div id="time-coordinate-units" class="section level2">
<h2>4.4.1. Time Coordinate Units</h2>
<p>The <code>CFtime</code> package fully supports the units
<code>&quot;second&quot;</code>, <code>&quot;minute&quot;</code>, <code>&quot;hour&quot;</code> and
<code>&quot;day&quot;</code>, including abbreviated and/or plural forms. Unit
<code>&quot;second&quot;</code> is the SI second, a <code>&quot;minute&quot;</code> equals
60 seconds, an <code>&quot;hour&quot;</code> equals 3,600 seconds, and a
<code>&quot;day&quot;</code> equals 86,400 seconds. This is exactly as expected,
but refer to the <code>utc</code> calendar, below, for peculiarities of
that calendar.</p>
<p>The <code>units</code> <code>&quot;month&quot;</code> and <code>&quot;year&quot;</code>
are accepted on input but not using their definition in UDUNITS.
Instead, <code>&quot;year&quot;</code> is a calendar year, so either 360, 365 or
366 days depending on its value and the calendar. A <code>&quot;month&quot;</code>
is similarly a calendar month. Use of either of these time units is
discouraged by the CF Metadata Conventions.</p>
<p>Other UDUNITS time units are not supported by this package.</p>
<p>All variants of the glue word <code>&quot;since&quot;</code> are accepted,
being <code>&quot;after&quot;</code>, <code>&quot;from&quot;</code>, <code>&quot;ref&quot;</code> and
<code>&quot;per&quot;</code>.</p>
<p>The <em>“reference datetime string”</em> should be formatted using
the UDUNITS broken timestamp format or following <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO8601</a> rules, but
noting that datetimes valid in specific calendars other than Gregorian
(such as <code>2023-02-30</code> in the <code>360_day</code> calendar)
are acceptable as well. The UDUNITS “packed” format is not
supported.</p>
<p>Timezone information can only use <code>00</code>, <code>15</code>,
<code>30</code> and <code>45</code> to indicate minutes; other minute
offsets have never been used anywhere. A time zone value of
<code>&quot;UTC&quot;</code> is accepted, as an extension to the conventions. Even
though the conventions don’t indicate it, the <code>tai</code> and
<code>utc</code> calendars can carry no time zone indication as that
does not exist for either of these calendars.</p>
</div>
<div id="calendar" class="section level2">
<h2>4.4.2. Calendar</h2>
<p>If a <code>calendar</code> attribute is not given,
<code>&quot;standard&quot;</code> is assumed, being the default calendar as per
the conventions.</p>
<ul>
<li><code>standard</code> (or the deprecated <code>gregorian</code>):
Fully conformant, but leap seconds are never considered (see below). The
combination of a <em>reference datetime</em> and other
<em>datetimes</em> spanning the gap between 1582-10-05 and 1582-10-15,
in either direction, is supported.</li>
<li><code>proleptic_gregorian</code>: Fully conformant, but leap seconds
are never considered (see below).</li>
<li><code>julian</code>: Fully conformant, but, despite the suggestion
in the conventions, leap seconds do not exist in this calendar and are
thus never considered.</li>
<li><code>utc</code>: Fully conformant. Leap seconds are always
accounted so when a leap second is included, UTC time progresses like
<code>23:59:58 ... 23:59:59 ... 23:59:60 ... 00:00:00 ... 00:00:01</code>.
This also extends to minutes
<code>23:59:00 ... 23:59:60 ... 00:00:59 ... 00:01:59</code>, always
adding 60 seconds. Likewise for <code>hours</code> and
<code>days</code>. Units <code>&quot;year&quot;</code> and <code>&quot;month&quot;</code>
are not allowed, and neither is any time zone indication.</li>
<li><code>tai</code>: Fully conformant. Units <code>&quot;year&quot;</code> and
<code>&quot;month&quot;</code> are not allowed, and neither is any time zone
indication.</li>
<li><code>no_leap</code> / <code>365_day</code>: Fully conformant.</li>
<li><code>all_leap</code> / <code>366_day</code>: Fully conformant.</li>
<li><code>360_day</code>: Fully conformant.</li>
<li><code>none</code>: Fully conformant.</li>
</ul>
</div>
<div id="leap-seconds" class="section level2">
<h2>4.4.3. Leap seconds</h2>
<p>The <code>utc</code> calendar fully supports leap seconds.</p>
<p>The <code>julian</code> calendar has no concept of leap seconds so
these are never possible or considered. Using a leap second in a
<code>julian</code> calendar is an error.</p>
<p>In the <code>standard</code> and <code>proleptic_gregorian</code>
calendars only the variant without leap seconds is considered. The
<code>units_metadata</code> attribute is not considered, so assumed to
be <code>&quot;leap seconds: unknown&quot;</code>. The assumption here is that if
second accuracy for a data producer is essential, then the entire tool
chain from observation equipment, to processing, to file recording will
have to be of known characteristics with regards to UTC time and leap
seconds and thus the <code>utc</code> calendar would be used, rather
than <code>standard</code> or <code>proleptic_gregorian</code> with a
caveat communicated through the <code>units_metdata</code>
attribute.</p>
</div>
<div id="time-coordinates-with-no-annual-cycle" class="section level2">
<h2>4.4.4. Time Coordinates with no Annual Cycle</h2>
<p>Fully conformant.</p>
</div>
<div id="explicitly-defined-calendar" class="section level2">
<h2>4.4.5. Explicitly Defined Calendar</h2>
<p>Not implemented.</p>
</div>
<div id="climatological-statistics" class="section level2">
<h2>7.4. Climatological statistics</h2>
<p>The time coordinate with climatological bounds is fully supported,
with the exception of using year 0 in the <code>standard</code> and
<code>julian</code> calendars to flag climatological data (which is a
deprecated practice as per the CF Metadata Conventions.</p>
<p>This package is agnostic to the underlying statistical operation that
produced the <em>climatological time</em> so the
<code>cell_methods</code> attribute is not inspected nor
interpreted.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
